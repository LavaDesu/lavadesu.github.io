"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var a,r=0,l=1,o=[{name:"Slow",velocity:.1,gradient:2,lifespan:100,lifespanBase:50,lifeOpacity:.25,opacityMultiplier:1,size:3,rainbow:!0,particles:100,rate:50,delayAll:4e3,delayPer:5},{name:"Speed",velocity:.3,gradient:10,lifespan:250,lifespanBase:450,lifeOpacity:.25,opacityMultiplier:.8,size:3,rainbow:!0,particles:200,rate:5,delayAll:2e3,delayPer:20},{name:"Speeder",velocity:.35,gradient:20,lifespan:250,lifespanBase:200,lifeOpacity:.25,opacityMultiplier:.8,size:3,rainbow:!0,particles:100,rate:4,delayAll:2e3,delayPer:5},{name:"Speeder mess",velocity:.4,gradient:15,lifespan:100,lifespanBase:50,lifeOpacity:.25,opacityMultiplier:1,size:3,rainbow:!0,particles:700,rate:10,delayAll:3e3,delayPer:1},{name:"Stars",velocity:.005,gradient:0,lifespan:300,lifespanBase:100,lifeOpacity:.1,opacityMultiplier:.4,size:2,rainbow:!1,particles:500,rate:42,delayAll:5e3,delayPer:10},{name:"Rainbow stars",velocity:.005,gradient:0,lifespan:300,lifespanBase:100,lifeOpacity:.1,opacityMultiplier:1,size:2.2,rainbow:!0,particles:250,rate:42,delayAll:5e3,delayPer:10}],s=function(t,i,n){return t.map(function(t,e){return n(t,i[e])})},c=function(t,e){return s(t,e,function(t,e){return t+e})},h=function(){function t(){e(this,t),this.started=!1}return i(t,[{key:"start",value:function(){this.started=!0,this.lifespan=Math.random()*a.lifespan+a.lifespanBase,this.age=0,this.initial=[Math.random()*d.clientWidth,Math.random()*d.clientHeight],this.pos=this.initial.slice(0),this.velocity=[Math.random()*a.velocity*2-a.velocity,Math.random()*a.velocity*2-a.velocity],a.rainbow?(this.colour=[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())],this.gradient=[Math.random()*a.gradient*2-a.gradient,Math.random()*a.gradient*2-a.gradient,Math.random()*a.gradient*2-a.gradient]):this.colour=[255,255,255],this.ctx=d.getContext("2d")}},{key:"calcOpacity",value:function(){var t=this.lifespan*a.lifeOpacity;return this.age<t?this.age/t:this.age>this.lifespan-t?1-(this.age-this.lifespan+t)/t:1}},{key:"destroy",value:function(){clearInterval(this.renderer),this.start()}},{key:"draw",value:function(){if(this.started){if(this.age++,this.age>=this.lifespan)return this.destroy();this.pos=c(this.pos,this.velocity),this.rainbow&&(this.colour=c(this.colour,this.gradient)),this.ctx.beginPath(),this.ctx.fillStyle="rgba(".concat(this.colour[0],", ").concat(this.colour[1],", ").concat(this.colour[2],", ").concat(this.calcOpacity()*a.opacityMultiplier,")"),this.ctx.arc(this.pos[0],this.pos[1],a.size,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()}}},{key:"lifespan",get:function(){return this._lifespan/l},set:function(t){return this._lifespan=t}},{key:"velocity",get:function(){return this._velocity.map(function(t){return t*l})},set:function(t){return this._velocity=t}},{key:"gradient",get:function(){return this._gradient.map(function(t){return t*l})},set:function(t){return this._gradient=t}}]),t}(),u=[],d=document.getElementById("bg"),f=0,p=function(t){if(t<0||t>=o.length)return console.log("bruh");u=[],f=0,a=o[t],l=r/a.rate,console.log("preset ".concat(t," - ").concat(a.name));for(var e=0;e<a.particles;e++)u.push(new h);y()},y=function t(){f>=a.particles||(u[f].start(),f++,setTimeout(t,Math.random()*a.delayPer+a.delayAll/a.particles))},g=0,m=!1,w=[],t=function t(e){if(w.length<20)return 0!==g&&w.push(e-g),g=e,void window.requestAnimationFrame(t);m||(r=w.reduce(function(t,e){return t+e})/w.length,p(Math.floor(Math.random()*o.length)),m=!0),d.clientHeight!==window.innerHeight&&d.setAttribute("height",window.innerHeight),d.clientWidth!==window.innerWidth&&d.setAttribute("width",window.innerWidth),d.getContext("2d").clearRect(0,0,d.clientWidth,d.clientHeight),u.forEach(function(t){return t.draw()}),window.requestAnimationFrame(t)};window.onload=function(){d.getContext&&window.requestAnimationFrame(t)},document.getElementById("mainAvatar").onclick=function(){var t=o.indexOf(a)+1;t>=o.length&&(t=0),p(t)};